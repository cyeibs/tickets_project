(()=>{"use strict";var e={876:function(e,t,a){var s=a(893),i=a(294),n=a(745),r=a(856),l=a(906);let o=()=>{let e=l.default;return e.initDataUnsafe&&e.initDataUnsafe.user?e.initDataUnsafe.user:null},c=e=>{let{onAuthenticated:t}=e,[a,n]=(0,i.useState)(""),[r,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(null),[p,u]=(0,i.useState)(null);(0,i.useEffect)(()=>{l.default.initData;let e=o();e&&(u(e),console.log("Telegram user data:",e),setTimeout(()=>{let a={id:e.id,username:e.username||"unknown",first_name:e.first_name||"",last_name:e.last_name||"",auth_date:Date.now()};localStorage.setItem("tg_token",JSON.stringify(a)),t()},1e3))},[t]);let g=async()=>{if(!a.trim())return void m("Пожалуйста, введите код верификации");c(!0),m(null);try{if(await new Promise(e=>setTimeout(e,1e3)),/^\d{6}$/.test(a)){let e=p?{id:p.id,username:p.username||"unknown",auth_date:Date.now()}:{id:"manual_"+Date.now(),username:"manual_user",auth_date:Date.now()};localStorage.setItem("tg_token",JSON.stringify(e)),t()}else m("Неверный код. Пожалуйста, введите 6-значный код.")}catch(e){m("Ошибка аутентификации. Пожалуйста, попробуйте снова.")}finally{c(!1)}};return(0,s.jsxs)("div",{className:"auth-container",children:[(0,s.jsx)("h1",{children:"Аутентификация"}),p?(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsxs)("p",{children:["Привет, ",p.first_name,"!"]}),(0,s.jsx)("p",{children:"Проверяем данные вашего аккаунта..."}),(0,s.jsx)("div",{className:"loading-spinner"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Введите код верификации для продолжения"}),d&&(0,s.jsx)("div",{className:"error-message",children:d}),(0,s.jsx)("div",{className:"input-group",children:(0,s.jsx)("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Код верификации (6 цифр)",disabled:r})}),(0,s.jsx)("button",{onClick:g,disabled:r,className:"verify-button",children:r?"Проверка...":"Проверить"})]})]})},d=e=>{let{event:t}=e;return(0,s.jsxs)("div",{className:"event-card",children:[(0,s.jsx)("div",{className:"event-image-container",children:(0,s.jsx)("img",{src:t.image,alt:t.title,className:"event-image"})}),(0,s.jsxs)("div",{className:"event-content",children:[(0,s.jsx)("h2",{className:"event-title",children:t.title}),(0,s.jsx)("p",{className:"event-description",children:t.description.length>100?`${t.description.substring(0,100)}...`:t.description}),(0,s.jsx)(r.rU,{to:`/event/${t.id}`,className:"details-button",children:"Подробнее"})]})]})},m=()=>{let[e,t]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[l,o]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),p=(0,r.s0)();return((0,i.useEffect)(()=>{try{let e=localStorage.getItem("tg_token");e&&m(JSON.parse(e))}catch(e){console.error("Error parsing user data:",e)}(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),t([{id:"1",title:"Летний музыкальный фестиваль",description:"Присоединяйтесь к трем дням потрясающих музыкальных выступлений от лучших артистов со всего мира.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"2",title:"Технологическая конференция 2023",description:"Крупнейшая технологическая конференция года с докладчиками из ведущих технологических компаний.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"3",title:"Выставка еды и вина",description:"Попробуйте изысканные блюда и вина от известных шеф-поваров и виноделен.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"4",title:"Художественная выставка",description:"Представлены работы как известных, так и начинающих художников со всего мира.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"5",title:"Марафон 2023",description:"Ежегодный городской марафон с участниками из более чем 50 стран.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"}])}catch(e){o("Не удалось загрузить события. Пожалуйста, попробуйте позже.")}finally{n(!1)}})()},[]),a)?(0,s.jsx)("div",{className:"loading",children:"Загрузка событий..."}):l?(0,s.jsx)("div",{className:"error",children:l}):(0,s.jsxs)("div",{className:"events-page",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("h1",{children:"Предстоящие события"}),c&&(0,s.jsxs)("div",{className:"user-panel",children:[(0,s.jsx)("span",{className:"username",children:c.username||c.first_name||"Пользователь"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("tg_token"),p("/auth")},className:"logout-button",children:"Выйти"})]})]}),(0,s.jsx)("div",{className:"events-grid",children:e.map(e=>(0,s.jsx)(d,{event:e},e.id))})]})},p=()=>{let{id:e}=(0,r.UO)(),[t,a]=(0,i.useState)(null),[n,l]=(0,i.useState)(!0),[o,c]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,1e3));let t={1:{id:"1",title:"Летний музыкальный фестиваль",description:"Присоединяйтесь к трем дням потрясающих музыкальных выступлений от лучших артистов со всего мира. Фестиваль будет включать несколько сцен с разными музыкальными жанрами, включая рок, поп, электронную музыку, джаз и многое другое. На территории будут доступны точки питания и места для кемпинга.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},2:{id:"2",title:"Технологическая конференция 2023",description:"Крупнейшая технологическая конференция года с докладчиками из ведущих технологических компаний. Темы включают искусственный интеллект, блокчейн, облачные вычисления, кибербезопасность и многое другое. В течение всего мероприятия будут доступны возможности для нетворкинга и мастер-классы.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},3:{id:"3",title:"Выставка еды и вина",description:"Попробуйте изысканные блюда и вина от известных шеф-поваров и виноделен. Выставка будет включать кулинарные демонстрации, дегустации вин и мастер-классы по сочетанию блюд. Посетители смогут приобрести продукцию непосредственно у продавцов.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},4:{id:"4",title:"Художественная выставка",description:"Представлены работы как известных, так и начинающих художников со всего мира. Выставка включает картины, скульптуры, фотографии и цифровое искусство. В течение всего периода выставки будут проводиться экскурсии с гидом и беседы с художниками.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},5:{id:"5",title:"Марафон 2023",description:"Ежегодный городской марафон с участниками из более чем 50 стран. Маршрут проходит через исторические достопримечательности и живописные виды города. Вдоль маршрута будут доступны пункты с водой и медицинская поддержка. Зрители могут поддерживать участников из специально отведенных зон.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"}};e&&t[e]?a(t[e]):c("Событие не найдено")}catch(e){c("Не удалось загрузить детали события. Пожалуйста, попробуйте позже.")}finally{l(!1)}})()},[e]),n)?(0,s.jsx)("div",{className:"loading",children:"Загрузка деталей события..."}):o||!t?(0,s.jsxs)("div",{className:"error-container",children:[(0,s.jsx)("div",{className:"error",children:o||"Событие не найдено"}),(0,s.jsx)(r.rU,{to:"/",className:"back-button",children:"Вернуться к списку событий"})]}):(0,s.jsxs)("div",{className:"event-details",children:[(0,s.jsx)("div",{className:"event-image-container",children:(0,s.jsx)("img",{src:t.image,alt:t.title,className:"event-image"})}),(0,s.jsxs)("div",{className:"event-info",children:[(0,s.jsx)("h1",{children:t.title}),(0,s.jsx)("p",{className:"event-description",children:t.description}),(0,s.jsx)(r.rU,{to:"/",className:"back-button",children:"Вернуться к списку событий"})]})]})},u=()=>{let e=window.location.pathname.split("/");return e.length>1&&"tickets_project"===e[1]?"/tickets_project":""};l.default.ready(),l.default.expand();let g=l.default;document.documentElement.style.setProperty("--tg-theme-bg-color",g.backgroundColor||"#fff"),document.documentElement.style.setProperty("--tg-theme-text-color",g.textColor||"#000"),document.documentElement.style.setProperty("--tg-theme-hint-color",g.hintColor||"#999"),document.documentElement.style.setProperty("--tg-theme-link-color",g.linkColor||"#2481cc"),document.documentElement.style.setProperty("--tg-theme-button-color",g.buttonColor||"#2481cc"),document.documentElement.style.setProperty("--tg-theme-button-text-color",g.buttonTextColor||"#fff"),document.documentElement.style.setProperty("--tg-theme-secondary-bg-color",g.secondaryBgColor||"#f0f0f0");let h=document.getElementById("root");h&&n.createRoot(h).render((0,s.jsx)(i.StrictMode,{children:(0,s.jsx)(()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{l.default.ready(),localStorage.getItem("tg_token")&&t(!0)},[]),(0,s.jsx)(r.VK,{basename:u(),children:(0,s.jsxs)(r.Z5,{children:[(0,s.jsx)(r.AW,{path:"/auth",element:e?(0,s.jsx)(r.Fg,{to:"/"}):(0,s.jsx)(c,{onAuthenticated:()=>t(!0)})}),(0,s.jsx)(r.AW,{path:"/event/:id",element:e?(0,s.jsx)(p,{}):(0,s.jsx)(r.Fg,{to:"/auth"})}),(0,s.jsx)(r.AW,{path:"/",element:e?(0,s.jsx)(m,{}):(0,s.jsx)(r.Fg,{to:"/auth"})})]})})},{})}))}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.m=e,a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];a.O=(t,s,i,n)=>{if(s){n=n||0;for(var r=e.length;r>0&&e[r-1][2]>n;r--)e[r]=e[r-1];e[r]=[s,i,n];return}for(var l=1/0,r=0;r<e.length;r++){for(var[s,i,n]=e[r],o=!0,c=0;c<s.length;c++)(!1&n||l>=n)&&Object.keys(a.O).every(e=>a.O[e](s[c]))?s.splice(c--,1):(o=!1,n<l&&(l=n));if(o){e.splice(r--,1);var d=i();void 0!==d&&(t=d)}}return t}})(),a.rv=()=>"1.3.12",(()=>{var e={980:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var i,n,[r,l,o]=s,c=0;if(r.some(t=>0!==e[t])){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(o)var d=o(a)}for(t&&t(s);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self.webpackChunkrsticket=self.webpackChunkrsticket||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),a.ruid="bundler=rspack@1.3.12";var s=a.O(void 0,["361","118","432"],function(){return a(876)});s=a.O(s)})();