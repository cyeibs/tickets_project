(()=>{"use strict";var e={464:function(e,t,n){var s=n(893),a=n(294),r=n(745),i=n(856),l=n(906);let o=()=>{let e=l.default;return e.initDataUnsafe&&e.initDataUnsafe.user?e.initDataUnsafe.user:null},c=e=>{let{onAuthenticated:t}=e,[n,r]=(0,a.useState)(""),[i,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),[u,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{l.default.initData;let e=o();e&&(p(e),console.log("Telegram user data:",e),setTimeout(()=>{let n={id:e.id,username:e.username||"unknown",first_name:e.first_name||"",last_name:e.last_name||"",auth_date:Date.now()};localStorage.setItem("tg_token",JSON.stringify(n)),t()},1e3))},[t]);let g=async()=>{if(!n.trim())return void m("Пожалуйста, введите код верификации");c(!0),m(null);try{if(await new Promise(e=>setTimeout(e,1e3)),/^\d{6}$/.test(n)){let e=u?{id:u.id,username:u.username||"unknown",auth_date:Date.now()}:{id:"manual_"+Date.now(),username:"manual_user",auth_date:Date.now()};localStorage.setItem("tg_token",JSON.stringify(e)),t()}else m("Неверный код. Пожалуйста, введите 6-значный код.")}catch(e){m("Ошибка аутентификации. Пожалуйста, попробуйте снова.")}finally{c(!1)}};return(0,s.jsxs)("div",{className:"auth-container",children:[(0,s.jsx)("h1",{children:"Аутентификация"}),u?(0,s.jsxs)("div",{className:"user-info",children:[(0,s.jsxs)("p",{children:["Привет, ",u.first_name,"!"]}),(0,s.jsx)("p",{children:"Проверяем данные вашего аккаунта..."}),(0,s.jsx)("div",{className:"loading-spinner"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Введите код верификации для продолжения"}),d&&(0,s.jsx)("div",{className:"error-message",children:d}),(0,s.jsx)("div",{className:"input-group",children:(0,s.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Код верификации (6 цифр)",disabled:i})}),(0,s.jsx)("button",{onClick:g,disabled:i,className:"verify-button",children:i?"Проверка...":"Проверить"})]})]})},d=e=>{let{event:t}=e;return(0,s.jsxs)("div",{className:"event-card",children:[(0,s.jsx)("div",{className:"event-image-container",children:(0,s.jsx)("img",{src:t.image,alt:t.title,className:"event-image"})}),(0,s.jsxs)("div",{className:"event-content",children:[(0,s.jsx)("h2",{className:"event-title",children:t.title}),(0,s.jsx)("p",{className:"event-description",children:t.description.length>100?`${t.description.substring(0,100)}...`:t.description}),(0,s.jsx)(i.rU,{to:`/event/${t.id}`,className:"details-button",children:"Подробнее"})]})]})},m=e=>{let{events:t}=e,[n,r]=(0,a.useState)(0),[l,o]=(0,a.useState)(null),c=(0,a.useRef)(null),d=(0,a.useRef)(0),[m,u]=(0,a.useState)(!1),[p,g]=(0,a.useState)(0),h=(0,a.useRef)(null),v=(0,i.s0)(),x=e=>{c.current&&m&&f(e.clientX-d.current)},f=e=>{if(!c.current)return;g(e);let t=null;e>10?t="right":e<-10&&(t="left"),t&&(h.current=t),o(t);let n=Math.max(Math.min(e,300),-300);c.current.style.transform=`translateX(${n}px) rotate(${.05*n}deg)`},j=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",j),b()},b=()=>{c.current&&m&&(u(!1),"right"===h.current||p>10?N():"left"===h.current||p<-10?k():y())},y=()=>{c.current&&(c.current.style.transform="translateX(0) rotate(0deg)",o(null))},N=()=>{c.current&&(c.current.style.transform="translateX(1000px) rotate(30deg)",setTimeout(()=>{w()},300))},k=()=>{c.current&&(c.current.style.transform="translateX(-1000px) rotate(-30deg)",setTimeout(()=>{w()},300))},w=()=>{r(e=>{let n=e+1;return n<t.length?n:0}),y()};if((0,a.useEffect)(()=>{y(),h.current=null},[n]),(0,a.useEffect)(()=>()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",j)},[]),0===t.length)return(0,s.jsx)("div",{className:"no-events",children:"Нет доступных событий"});let E=t[n];return(0,s.jsxs)("div",{className:"swipe-container",children:[(0,s.jsxs)("div",{className:"swipe-actions",children:[(0,s.jsx)("button",{className:"action-button skip-button",onClick:k,children:"✕"}),(0,s.jsx)("button",{className:"action-button like-button",onClick:N,children:"♥"})]}),(0,s.jsx)("div",{className:`swipe-card ${l?`swipe-${l}`:""}`,ref:c,onTouchStart:e=>{d.current=e.touches[0].clientX,u(!0),g(0),o(null),h.current=null},onTouchMove:e=>{c.current&&m&&f(e.touches[0].clientX-d.current)},onTouchEnd:()=>{b()},onMouseDown:e=>{e.preventDefault(),d.current=e.clientX,u(!0),g(0),o(null),h.current=null,document.addEventListener("mousemove",x),document.addEventListener("mouseup",j)},children:(0,s.jsx)("div",{className:"card-image",style:{backgroundImage:`url(${E.image})`},children:(0,s.jsxs)("div",{className:"card-content",children:[(0,s.jsx)("h2",{children:E.title}),(0,s.jsx)("p",{children:E.description}),(0,s.jsx)("button",{className:"details-button",onClick:e=>{e.stopPropagation(),t[n]&&v(`/event/${t[n].id}`)},children:"Подробнее"})]})})}),(0,s.jsxs)("div",{className:"swipe-counter",children:[n+1," / ",t.length]})]})},u=e=>{let{activeView:t,onChange:n}=e;return(0,s.jsxs)("div",{className:"view-toggle",children:[(0,s.jsxs)("button",{className:`toggle-button ${"grid"===t?"active":""}`,onClick:()=>n("grid"),children:[(0,s.jsx)("span",{className:"toggle-icon grid-icon",children:"⊞"}),(0,s.jsx)("span",{className:"toggle-label",children:"Сетка"})]}),(0,s.jsxs)("button",{className:`toggle-button ${"swipe"===t?"active":""}`,onClick:()=>n("swipe"),children:[(0,s.jsx)("span",{className:"toggle-icon swipe-icon",children:"⇄"}),(0,s.jsx)("span",{className:"toggle-label",children:"Свайп"})]})]})},p=()=>{let[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),[h,v]=(0,a.useState)("grid"),x=(0,i.s0)();return((0,a.useEffect)(()=>{let e=localStorage.getItem("event_view_mode");("grid"===e||"swipe"===e)&&v(e)},[]),(0,a.useEffect)(()=>{localStorage.setItem("event_view_mode",h),l.default.expand()},[h]),(0,a.useEffect)(()=>{try{let e=localStorage.getItem("tg_token");e&&g(JSON.parse(e))}catch(e){console.error("Error parsing user data:",e)}(async()=>{try{await new Promise(e=>setTimeout(e,1e3)),t([{id:"1",title:"Летний музыкальный фестиваль",description:"Присоединяйтесь к трем дням потрясающих музыкальных выступлений от лучших артистов со всего мира.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"2",title:"Технологическая конференция 2023",description:"Крупнейшая технологическая конференция года с докладчиками из ведущих технологических компаний.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"3",title:"Выставка еды и вина",description:"Попробуйте изысканные блюда и вина от известных шеф-поваров и виноделен.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"4",title:"Художественная выставка",description:"Представлены работы как известных, так и начинающих художников со всего мира.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},{id:"5",title:"Марафон 2023",description:"Ежегодный городской марафон с участниками из более чем 50 стран.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"}])}catch(e){c("Не удалось загрузить события. Пожалуйста, попробуйте позже.")}finally{r(!1)}})()},[]),n)?(0,s.jsx)("div",{className:"loading",children:"Загрузка событий..."}):o?(0,s.jsx)("div",{className:"error",children:o}):(0,s.jsxs)("div",{className:"events-page",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("h1",{children:"Предстоящие события"}),p&&(0,s.jsxs)("div",{className:"user-panel",children:[(0,s.jsx)("span",{className:"username",children:p.username||p.first_name||"Пользователь"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("tg_token"),x("/auth")},className:"logout-button",children:"Выйти"})]})]}),(0,s.jsx)(u,{activeView:h,onChange:e=>{v(e)}}),"grid"===h?(0,s.jsx)("div",{className:"events-grid",children:e.map(e=>(0,s.jsx)(d,{event:e},e.id))}):(0,s.jsx)(m,{events:e})]})},g=()=>{let{id:e}=(0,i.UO)(),[t,n]=(0,a.useState)(null),[r,l]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{try{await new Promise(e=>setTimeout(e,1e3));let t={1:{id:"1",title:"Летний музыкальный фестиваль",description:"Присоединяйтесь к трем дням потрясающих музыкальных выступлений от лучших артистов со всего мира. Фестиваль будет включать несколько сцен с разными музыкальными жанрами, включая рок, поп, электронную музыку, джаз и многое другое. На территории будут доступны точки питания и места для кемпинга.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},2:{id:"2",title:"Технологическая конференция 2023",description:"Крупнейшая технологическая конференция года с докладчиками из ведущих технологических компаний. Темы включают искусственный интеллект, блокчейн, облачные вычисления, кибербезопасность и многое другое. В течение всего мероприятия будут доступны возможности для нетворкинга и мастер-классы.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},3:{id:"3",title:"Выставка еды и вина",description:"Попробуйте изысканные блюда и вина от известных шеф-поваров и виноделен. Выставка будет включать кулинарные демонстрации, дегустации вин и мастер-классы по сочетанию блюд. Посетители смогут приобрести продукцию непосредственно у продавцов.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},4:{id:"4",title:"Художественная выставка",description:"Представлены работы как известных, так и начинающих художников со всего мира. Выставка включает картины, скульптуры, фотографии и цифровое искусство. В течение всего периода выставки будут проводиться экскурсии с гидом и беседы с художниками.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"},5:{id:"5",title:"Марафон 2023",description:"Ежегодный городской марафон с участниками из более чем 50 стран. Маршрут проходит через исторические достопримечательности и живописные виды города. Вдоль маршрута будут доступны пункты с водой и медицинская поддержка. Зрители могут поддерживать участников из специально отведенных зон.",image:"https://random-image-pepebigotes.vercel.app/api/random-image"}};e&&t[e]?n(t[e]):c("Событие не найдено")}catch(e){c("Не удалось загрузить детали события. Пожалуйста, попробуйте позже.")}finally{l(!1)}})()},[e]),r)?(0,s.jsx)("div",{className:"loading",children:"Загрузка деталей события..."}):o||!t?(0,s.jsxs)("div",{className:"error-container",children:[(0,s.jsx)("div",{className:"error",children:o||"Событие не найдено"}),(0,s.jsx)(i.rU,{to:"/",className:"back-button",children:"Вернуться к списку событий"})]}):(0,s.jsxs)("div",{className:"event-details",children:[(0,s.jsx)("div",{className:"event-image-container",children:(0,s.jsx)("img",{src:t.image,alt:t.title,className:"event-image"})}),(0,s.jsxs)("div",{className:"event-info",children:[(0,s.jsx)("h1",{children:t.title}),(0,s.jsx)("p",{className:"event-description",children:t.description}),(0,s.jsx)(i.rU,{to:"/",className:"back-button",children:"Вернуться к списку событий"})]})]})},h=()=>{let e=window.location.pathname.split("/");return e.length>1&&"tickets_project"===e[1]?"/tickets_project":""};l.default.ready(),l.default.expand();let v=l.default;document.documentElement.style.setProperty("--tg-theme-bg-color",v.backgroundColor||"#fff"),document.documentElement.style.setProperty("--tg-theme-text-color",v.textColor||"#000"),document.documentElement.style.setProperty("--tg-theme-hint-color",v.hintColor||"#999"),document.documentElement.style.setProperty("--tg-theme-link-color",v.linkColor||"#2481cc"),document.documentElement.style.setProperty("--tg-theme-button-color",v.buttonColor||"#2481cc"),document.documentElement.style.setProperty("--tg-theme-button-text-color",v.buttonTextColor||"#fff"),document.documentElement.style.setProperty("--tg-theme-secondary-bg-color",v.secondaryBgColor||"#f0f0f0");let x=document.getElementById("root");x&&r.createRoot(x).render((0,s.jsx)(a.StrictMode,{children:(0,s.jsx)(()=>{let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{l.default.ready(),l.default.expand(),l.default.themeParams&&(document.documentElement.style.setProperty("--tg-theme-bg-color",l.default.themeParams.bg_color||""),document.documentElement.style.setProperty("--tg-theme-text-color",l.default.themeParams.text_color||""),document.documentElement.style.setProperty("--tg-theme-button-color",l.default.themeParams.button_color||""),document.documentElement.style.setProperty("--tg-theme-button-text-color",l.default.themeParams.button_text_color||"")),localStorage.getItem("tg_token")&&t(!0)},[]),(0,s.jsx)(i.VK,{basename:h(),children:(0,s.jsxs)(i.Z5,{children:[(0,s.jsx)(i.AW,{path:"/auth",element:e?(0,s.jsx)(i.Fg,{to:"/"}):(0,s.jsx)(c,{onAuthenticated:()=>t(!0)})}),(0,s.jsx)(i.AW,{path:"/event/:id",element:e?(0,s.jsx)(g,{}):(0,s.jsx)(i.Fg,{to:"/auth"})}),(0,s.jsx)(i.AW,{path:"/",element:e?(0,s.jsx)(p,{}):(0,s.jsx)(i.Fg,{to:"/auth"})})]})})},{})}))}},t={};function n(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.m=e,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];n.O=(t,s,a,r)=>{if(s){r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[s,a,r];return}for(var l=1/0,i=0;i<e.length;i++){for(var[s,a,r]=e[i],o=!0,c=0;c<s.length;c++)(!1&r||l>=r)&&Object.keys(n.O).every(e=>n.O[e](s[c]))?s.splice(c--,1):(o=!1,r<l&&(l=r));if(o){e.splice(i--,1);var d=a();void 0!==d&&(t=d)}}return t}})(),n.rv=()=>"1.3.12",(()=>{var e={980:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var a,r,[i,l,o]=s,c=0;if(i.some(t=>0!==e[t])){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(o)var d=o(n)}for(t&&t(s);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},s=self.webpackChunkrsticket=self.webpackChunkrsticket||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.ruid="bundler=rspack@1.3.12";var s=n.O(void 0,["361","118","432"],function(){return n(464)});s=n.O(s)})();