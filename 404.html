<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting to app</title>
    <script>
      // Redirect to the root with the path as a query parameter
      // GitHub Pages serves 404.html when a route doesn't exist on the server
      // This helps with client-side routing
      var pathSegmentsToKeep = 1; // Keep the repository name segment

      var location = window.location;
      var pathName =
        location.pathname
          .split("/")
          .slice(0, pathSegmentsToKeep + 1)
          .join("/") + "/";
      var redirectUrl =
        location.protocol +
        "//" +
        location.hostname +
        (location.port ? ":" + location.port : "") +
        pathName;

      // Preserve the current path (without the repository name) as a query param
      var remainder =
        "/" +
        location.pathname
          .slice(1)
          .split("/")
          .slice(pathSegmentsToKeep)
          .join("/");
      if (remainder !== "/") {
        redirectUrl = redirectUrl + "?p=" + encodeURIComponent(remainder);
      }

      window.location.replace(redirectUrl);
    </script>
  </head>
  <body>
    Redirecting to app...
  </body>
</html>
